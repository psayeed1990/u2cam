_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[13],{E5GR:function(e,r,a){e.exports={register:"CreateUser_register__3YnOE",registerContent:"CreateUser_registerContent__-DiL_"}},GDVR:function(e,r,a){"use strict";var s=a("nKUr"),n=a("q1tI"),t=a("jcvg"),i=a("k0rj"),c=a("YFqc"),o=a.n(c),d=a("KIaw"),l=a.n(d),u=function(){return Object(s.jsx)("menu",{id:l.a.menu,children:Object(s.jsxs)("nav",{id:l.a.nav,children:[Object(s.jsx)(o.a,{href:"/",children:"Home"}),Object(s.jsx)(o.a,{href:"/admin/dashboard",children:"Dashboard"}),Object(s.jsx)(o.a,{href:"/user/auth/logout",children:"Logout"})]})})},m=a("GMIE"),j=a.n(m);r.a=function(){var e=Object(n.useContext)(t.a),r=e[0];e[1];return Object(s.jsxs)("header",{id:j.a.header,children:[Object(s.jsx)(i.a,{}),r?Object(s.jsx)(n.Fragment,{}):Object(s.jsx)(u,{})]})}},GMIE:function(e,r,a){e.exports={header:"AdminHeader_header__2yDfM"}},HBKp:function(e,r,a){"use strict";var s=a("nKUr"),n=a("20a2"),t=a("q1tI"),i=a("Uw7I"),c=a("GDVR"),o=a("YFqc"),d=a.n(o),l=a("HGLW"),u=a.n(l),m=function(){return Object(s.jsx)("div",{className:u.a.sidebar,children:Object(s.jsxs)("ul",{children:[Object(s.jsxs)("li",{className:u.a.adminLinks,children:[Object(s.jsx)(d.a,{href:"/admin/users",children:"Users"}),Object(s.jsxs)("ul",{className:u.a.subMenu,children:[Object(s.jsx)("li",{className:"".concat(u.a.adminLinks),children:Object(s.jsx)(d.a,{href:"/admin/users",children:"Search Users"})}),Object(s.jsx)("li",{className:"".concat(u.a.adminLinks),children:Object(s.jsx)(d.a,{href:"/admin/users/profile",children:"Profile"})}),Object(s.jsx)("li",{className:"".concat(u.a.adminLinks),children:Object(s.jsx)(d.a,{href:"/admin/users/create-user",children:"Create User"})})]})]}),Object(s.jsx)("li",{className:u.a.adminLinks,children:Object(s.jsx)(d.a,{href:"/admin/prfiles",children:"Users"})})]})})},j=a("jcvg"),h=a("wfTj"),p=a("RPPH"),b=a.n(p);r.a=function(e){var r=e.children,a=Object(t.useContext)(j.a),o=a[0],d=(a[1],Object(t.useContext)(h.a)),l=d[0],u=(d[1],Object(n.useRouter)());return Object(t.useEffect)((function(){if(!o)return l?"admin"!==l.role?u.push("/admin/unauthorized"):void 0:u.push("/user/auth/login")}),[l]),Object(s.jsxs)(t.Fragment,{children:[Object(s.jsx)(c.a,{}),!o&&l?Object(s.jsxs)("main",{className:b.a.AdminLayout,children:[Object(s.jsx)(m,{}),r]}):Object(s.jsx)("h1",{className:"heading",children:"Fetching user..."}),Object(s.jsx)(i.a,{})]})}},HGLW:function(e,r,a){e.exports={sidebar:"AdminSidebar_sidebar__2vcDe",adminLinks:"AdminSidebar_adminLinks__3SBUJ",subMenu:"AdminSidebar_subMenu__3kZ4n"}},KIaw:function(e,r,a){e.exports={nav:"AdminMenu_nav__2-7Ek",menu:"AdminMenu_menu__24ge-"}},RPPH:function(e,r,a){e.exports={AdminLayout:"AdminLayout_AdminLayout__2W35P"}},kJDH:function(e,r,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/users/create-user",function(){return a("zjhl")}])},zjhl:function(e,r,a){"use strict";a.r(r);var s=a("nKUr"),n=a("o0o1"),t=a.n(n),i=a("HaE+"),c=a("g4pe"),o=a.n(c),d=a("NKCw"),l=a("E5GR"),u=a.n(l),m=a("q1tI"),j=a("Nlzp"),h=a("HBKp"),p=a("wfTj");r.default=function(){var e,r,a,n,c,l=Object(m.useContext)(p.a),b=l[0],x=(l[1],Object(m.useState)("")),O=x[0],f=x[1],g=Object(m.useState)(null),w=(g[0],g[1]),v=Object(d.a)(),_=v.register,N=v.errors,C=v.clearErrors,L=v.getValues,y=v.setError,E=v.handleSubmit,k=function(){var e=Object(i.a)(t.a.mark((function e(r){var a,s,n;return t.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f(""),e.next=3,Object(j.a)("POST","users/signup","registration",r,b);case 3:if("mongoError"!==(a=e.sent).status){e.next=7;break}return s=a.errorFieldName,a.errorFieldValue,n=a.errorMsg,e.abrupt("return",y("".concat(s),{type:"manual",message:"".concat(s.toUpperCase()," ").concat(n)}));case 7:if(!a.operational){e.next=9;break}return e.abrupt("return",f(a.operational));case 9:return e.abrupt("return",w("".concat(L("role")," created")));case 10:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}();return Object(s.jsxs)(h.a,{children:[Object(s.jsx)(o.a,{children:Object(s.jsx)("title",{children:"Create A User"})}),Object(s.jsx)("div",{className:"content",children:Object(s.jsxs)("div",{id:u.a.register,children:[Object(s.jsx)("h1",{className:"heading",children:"Create a user, admin, moderator"}),Object(s.jsx)("div",{className:"content",id:u.a.registerContent,children:Object(s.jsxs)("form",{onSubmit:E(k),children:[Object(s.jsx)("p",{className:"error",children:O}),Object(s.jsxs)("div",{className:"form-group",children:[Object(s.jsx)("input",{ref:_({required:"User type is required",maxLength:{value:32,message:"Max 32 character"},minLength:{value:2,message:"Min 2 character"},validate:function(e){return["admin","user","moderator"].includes(e)||"admin or moderator or user"}}),id:"role",autoFocus:!0,name:"role",type:"text",placeholder:"admin, moderator or user",autoComplete:"new-password",onChange:function(){["admin","user","moderator"].includes(L("role"))?C("role"):y("role",{type:"manual",message:"Only 'user', 'moderator' and 'admin' "})}}),Object(s.jsx)("label",{htmlFor:"role",children:"User Type"}),Object(s.jsx)("span",{className:"".concat(N.role?"error":""),children:null===(e=N.role)||void 0===e?void 0:e.message})]}),Object(s.jsxs)("div",{className:"form-group",children:[Object(s.jsx)("input",{ref:_({required:"Name is required",maxLength:{value:32,message:"Max 32 character"},minLength:{value:2,message:"Min 2 character"}}),id:"name",name:"name",type:"text",placeholder:"Name",autoComplete:"new-password"}),Object(s.jsx)("label",{htmlFor:"name",children:"Name"}),Object(s.jsx)("span",{className:"".concat(N.name?"error":""),children:null===(r=N.name)||void 0===r?void 0:r.message})]}),Object(s.jsxs)("div",{className:"form-group",children:[Object(s.jsx)("input",{ref:_({required:"Email is required",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i,message:"Invalid email address format"}}),id:"email",name:"email",type:"text",placeholder:"Email",autoComplete:"new-password"}),Object(s.jsx)("label",{htmlFor:"email",children:"Email"}),Object(s.jsx)("span",{className:"".concat(N.email?"error":""),children:null===(a=N.email)||void 0===a?void 0:a.message})]}),Object(s.jsxs)("div",{className:"form-group",children:[Object(s.jsx)("input",{ref:_({required:"Password is required",maxLength:{value:100,message:"Max 100 character"},minLength:{value:8,message:"Min 8 character"}}),id:"password",name:"password",type:"password",placeholder:"Password",autoComplete:"new-password",onChange:function(){L("password")!==L("passwordConfirm")?y("passwordConfirm",{type:"manual",message:"Password should match "}):C("passwordConfirm")}}),Object(s.jsx)("label",{htmlFor:"password",children:"Password"}),Object(s.jsx)("span",{className:"".concat(N.password?"error":""),children:null===(n=N.password)||void 0===n?void 0:n.message})]}),Object(s.jsxs)("div",{className:"form-group",children:[Object(s.jsx)("input",{ref:_({required:"Password again is required"}),id:"confirm-password",name:"passwordConfirm",type:"password",placeholder:"Password Confirm",autoComplete:"new-password",onChange:function(){L("password")!==L("passwordConfirm")?y("passwordConfirm",{type:"manual",message:"Password should match "}):C("passwordConfirm")}}),Object(s.jsx)("label",{htmlFor:"confirm-password",children:"Password Again"}),Object(s.jsx)("span",{className:"".concat(N.passwordConfirm?"error":""),children:null===(c=N.passwordConfirm)||void 0===c?void 0:c.message})]}),Object(s.jsx)("input",{id:"hidden",name:"hidden",type:"hidden",placeholder:"hidden",autoComplete:"on"}),Object(s.jsx)("div",{className:"form-group",children:Object(s.jsx)("input",{id:"submit",type:"submit",value:"Create ".concat(L("role")?L("role"):"")})})]})})]})})]})}}},[["kJDH",0,2,1,3,4,5]]]);